package dataquery;

import java.io.IOException;

import org.apache.lucene.document.Document;

import sentiment.SentimentAnalyzer;
import util.Utility;

public class QueryData {
    public static void main(String[] args) {
        try {
            SentimentAnalyzer analyzer = new SentimentAnalyzer();
            analyzer.loadModel("../data/sentiment/models/sentiment.model");
            String query = "smite";
            DataQuerier querier 
                = new DataQuerier()
                    .setIndexDirectory("../data/index/")
                    .setFieldType("title")
                    .setQuery(query)
                    .setup();
            Document[] docs = querier.getRetrievedDocs(10);
            for (Document doc : docs) {
                System.out.println(doc.get("docid"));
                System.out.println(doc.get("title"));
                System.out.println(doc.get("url"));
                String body = doc.get("body");
                System.out.println(analyzer.probability(Utility.getOnlyReivewText(body).toLowerCase(), "pos"));
                System.out.println("");
            
            }
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}
